<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="vpnApplication1.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:components="clr-namespace:vpnApplication1.Components"
    BackgroundColor="{DynamicResource PageBackgroundColor}"
    Title="Главная">

    <!-- Корневой слой: BlazorWebView снизу, оверлей поверх -->
    <Grid>

        <!-- Ваше Blazor-приложение -->
        <BlazorWebView x:Name="blazorWebView" HostPage="wwwroot/index.html">
            <BlazorWebView.RootComponents>
                <RootComponent Selector="#app" ComponentType="{x:Type components:Routes}" />
            </BlazorWebView.RootComponents>
        </BlazorWebView>

        <!-- Оверлей с WebView (по умолчанию скрыт) -->
        <Grid x:Name="BrowserOverlay"
              IsVisible="False"
              BackgroundColor="#EE000000"
              Padding="0"
              InputTransparent="False">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Верхняя панель: кнопка слева, URL справа на всю ширину -->
                <Grid Grid.Row="0"
                      BackgroundColor="{DynamicResource PageBackgroundColor}"
                      ColumnDefinitions="Auto,*"
                      Padding="12,8">
                    <Button Grid.Column="0"
                            Text="Закрыть"
                            Clicked="OnCloseBrowserClicked"
                            HorizontalOptions="Start" />
                    <Label  Grid.Column="1"
                            x:Name="UrlLabel"
                            VerticalOptions="Center"
                            HorizontalOptions="FillAndExpand"
                            LineBreakMode="TailTruncation" />
                </Grid>

                <!-- Сам WebView на весь экран -->
                <WebView x:Name="OverlayWebView" Grid.Row="1" />
            </Grid>
        </Grid>

    </Grid>
</ContentPage>
